<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <title>당신의 인디언은?</title>
</head>
<body oncontextmenu="return false" onselectstart="return false" ondragstart="return false" onkeydownn="return false">
<header>
    <img class="divider" src="images/ui/divider.png">
    <img class="main-title" src="images/ui/main-title.png">
</header>
<div class="container text-center">
    <div id="character" class="my-4 container">
        <div id="capture">
            <div class="character-images">
                <img id="background" src="images/components/background.png">
            </div>
            <div class="character-images">
                <img id="body" src="images/components/body.png">
            </div>
            <div class="character-images">
                <img id="head" src="images/components/head.png">
            </div>
            <div class="character-images">
                <img id="hand" src="images/components/hand.png">
            </div>
            <div class="character-images">
                <img id="clothing">
            </div>
            <div class="character-images">
                <img id="mouth">
            </div>
            <div class="character-images">
                <img id="eyesAndNose">
            </div>
            <div class="character-images">
                <img id="facePaint">
            </div>
            <div class="character-images">
                <img id="weapon">
            </div>
            <div class="character-images">
                <img id="eyebrow">
            </div>
            <div class="character-images">
                <img id="hair">
            </div>
            <div class="character-images">
                <img id="necklace">
            </div>
            <div class="character-images">
                <img id="headAccessory">
            </div>
        </div>
    </div>
    <div id="menu" class="container">
        <button id="eyesAndNose-button" class="btn">
            <img src="images/ui/button/eyesAndNose.png"/>
        </button>
        <button id="eyebrow-button" class="btn">
            <img src="images/ui/button/eyebrow.png"/>
        </button>
        <button id="mouth-button" class="btn">
            <img src="images/ui/button/mouth.png"/>
        </button>
        <button id="hair-button" class="btn">
            <img src="images/ui/button/hair.png"/>
        </button>
        <button id="clothing-button" class="btn">
            <img src="images/ui/button/clothing.png"/>
        </button>
        <button id="facePaint-button" class="btn">
            <img src="images/ui/button/facePaint.png"/>
        </button>
        <button id="weapon-button" class="btn">
            <img src="images/ui/button/weapon.png"/>
        </button>
        <button id="necklace-button" class="btn">
            <img src="images/ui/button/necklace.png"/>
        </button>
        <button id="headAccessory-button" class="btn">
            <img src="images/ui/button/headAccessory.png"/>
        </button>
    </div>
    <div id="image-list">
    </div>
    <button onclick="takeshot()">
        이미지 다운로드
    </button>
    <button onclick="reset()">
        초기화
    </button>
    <button onclick="copyUrl()">
        공유하기
    </button>
</div>
<footer>
    <img class="divider" src="images/ui/divider.png">
</footer>

<script>
    let vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);

    window.addEventListener('resize', () => {
        let vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', `${vh}px`);
    })
</script>
<script src="script.js"></script>
<script type="text/javascript">
    function takeshot() {
        const element = document.getElementById('capture');
        html2canvas(element, {backgroundColor: null}).then(canvas => {
            let a = document.createElement('a');
            // toDataURL defaults to png, so we need to request a jpeg, then convert for file download.
            a.href = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");
            a.download = 'malamaaina.png';
            a.click();
        });
    }

    function reset() {
        const defaultImages = {
            clothing: "images/components/clothing/clothing3.png",
            eyesAndNose: "images/components/eyesAndNose/eyesAndNose2.png",
            weapon: "images/components/weapon/weapon1.png",
            eyebrow: "images/components/eyebrow/eyebrow1.png",
            mouth: "images/components/mouth/mouth6.png",
            headAccessory: "images/components/blank.png",
            facePaint: "images/components/blank.png",
            hair: "images/components/blank.png",
            necklace: "images/components/blank.png",
        }

        for (const type in defaultImages) {
            const element = document.getElementById(`${type}`);
            element.src = defaultImages[type];
        }
    }

    reset();

    function copyUrl() {
        // todo: url에 이미지 렌더링 정보 넣기
        navigator.clipboard.writeText(window.location.href);
    }
</script>
</body>
</html>
